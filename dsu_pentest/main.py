import requests

# cPanel credentials
cpanel_username = 'admin_dsu'
cpanel_password = 'your_cpanel_password'
cpanel_domain = 'your_cpanel_domain'  # Usually 'localhost'

# API parameters
api_module = 'Email'  # The API module (in this case, 'Email')
api_function = 'addpop'  # The API function (in this case, 'addpop')

# Email account details
email_username = 'lmaouse'  # New email account username
email_password = 'password123'  # New email account password
email_domain = 'dsu.edu.in'  # Domain for the email account

# Additional API parameters
api_args = {
    'email': email_username,
    'password': email_password,
    'domain': email_domain,
    'quota': 'unlimited'  # Optional: email quota
}

# Construct URL for API call
url = f"https://{cpanel_domain}:2083/json-api/cpanel?cpanel_jsonapi_user={cpanel_username}&cpanel_jsonapi_apiversion=2&cpanel_jsonapi_module={api_module}&cpanel_jsonapi_func={api_function}"

# Make API call
response = requests.post(url, data=api_args)#, auth=(cpanel_username, cpanel_password))

# Check response
if response.status_code == 200:
    print("Email account created successfully!")
    print("Response:", response.json())
else:
    print(response.status_code)
    print()
    print("Error:", response.text)
